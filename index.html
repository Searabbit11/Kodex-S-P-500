<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KODEX S&P 500 ë°°ë‹¹ ì„¤ê³„ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap');
        body { font-family: 'Pretendard', sans-serif; background-color: #f8fafc; }
        .card { background: white; border-radius: 1.5rem; box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); }
        .input-field {
            width: 100%;
            padding: 0.75rem 1rem;
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            font-weight: 600;
            text-align: right;
            outline: none;
            transition: all 0.2s;
        }
        .input-field:focus {
            border-color: #3b82f6;
            ring: 2px;
            ring-color: #3b82f6;
            background-color: #ffffff;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-10">
            <h1 class="text-3xl font-bold text-slate-800 mb-2">ğŸ“Š KODEX S&P 500 ë°°ë‹¹ ì„¤ê³„ê¸°</h1>
            <p class="text-slate-500">ì‚¼ì„±ì¦ê¶Œ ISA ê³„ì¢Œ ì¥ê¸° íˆ¬ììë¥¼ ìœ„í•œ ëª©í‘œ ë‹¬ì„± ì‹œë®¬ë ˆì´í„°</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Input Section -->
            <div class="card p-6 md:p-8 border border-slate-100">
                <h2 class="text-xl font-semibold mb-6 text-blue-600 flex items-center">
                    <span class="mr-2">âš™ï¸</span> íˆ¬ì ì¡°ê±´ ì„¤ì •
                </h2>
                
                <div class="space-y-5">
                    <!-- Current Age -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">í˜„ì¬ ë‚˜ì´</label>
                        <div class="relative">
                            <input type="number" id="age" value="30" min="1" max="100" class="input-field pr-12">
                            <span class="absolute right-4 top-3 text-slate-400 font-medium">ì„¸</span>
                        </div>
                    </div>

                    <!-- Investment Period -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">íˆ¬ì ê¸°ê°„ (ì•ìœ¼ë¡œ ëª¨ì„ ê¸°ê°„)</label>
                        <div class="relative">
                            <input type="number" id="period" value="20" min="1" max="60" class="input-field pr-12">
                            <span class="absolute right-4 top-3 text-slate-400 font-medium">ë…„</span>
                        </div>
                    </div>

                    <!-- Target Dividend -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">ëª©í‘œ ì›” ë°°ë‹¹ê¸ˆ (í˜„ì¬ ê°€ì¹˜ ê¸°ì¤€)</label>
                        <div class="relative">
                            <input type="number" id="targetMonthly" value="100" step="10" class="input-field pr-12 text-blue-600">
                            <span class="absolute right-4 top-3 text-slate-400 font-medium">ë§Œì›</span>
                        </div>
                    </div>

                    <div class="pt-4 border-t border-dashed border-slate-200">
                        <details class="text-sm text-slate-500 cursor-pointer">
                            <summary class="hover:text-blue-500 transition-colors">ê³ ê¸‰ ì„¤ì • (ìˆ˜ìµë¥ /ì£¼ê°€)</summary>
                            <div class="mt-4 space-y-4 bg-slate-50 p-4 rounded-xl">
                                <div>
                                    <label class="block text-xs mb-1 font-semibold text-slate-600">í˜„ì¬ ì£¼ê°€ (ì›)</label>
                                    <input type="number" id="currentPrice" value="22300" class="w-full p-2 border border-slate-200 rounded-lg text-sm text-right pr-4 font-bold">
                                </div>
                                <div>
                                    <label class="block text-xs mb-1 font-semibold text-slate-600">ì—°ê°„ ì˜ˆìƒ ìˆ˜ìµë¥  (%)</label>
                                    <input type="number" id="annualReturn" value="8" step="0.5" class="w-full p-2 border border-slate-200 rounded-lg text-sm text-right pr-4 font-bold">
                                </div>
                                <div>
                                    <label class="block text-xs mb-1 font-semibold text-slate-600">ì—° ë°°ë‹¹ ìˆ˜ìµë¥  (%)</label>
                                    <input type="number" id="divYield" value="1.4" step="0.1" class="w-full p-2 border border-slate-200 rounded-lg text-sm text-right pr-4 font-bold">
                                </div>
                            </div>
                        </details>
                    </div>
                </div>
            </div>

            <!-- Result Section -->
            <div class="card p-6 md:p-8 bg-blue-600 text-white flex flex-col justify-between">
                <div>
                    <h2 class="text-xl font-semibold mb-2 flex items-center">
                        <span class="mr-2">ğŸ¯</span> ì„¤ê³„ ê²°ê³¼
                    </h2>
                    <p class="text-blue-100 text-sm mb-8"><span id="targetAge" class="font-bold underline decoration-blue-300">50</span>ì„¸ë¶€í„° ë§¤ë‹¬ <span id="resultDiv" class="font-bold underline decoration-blue-300">100</span>ë§Œì›ì„ ë°›ìœ¼ë ¤ë©´:</p>
                    
                    <div class="space-y-8">
                        <div>
                            <p class="text-blue-200 text-sm mb-1">ë§¤ë‹¬ ì‚¬ì•¼ í•  ì£¼ì‹ ìˆ˜</p>
                            <div class="flex items-baseline">
                                <span id="monthlyShares" class="text-6xl font-bold">75</span>
                                <span class="ml-2 text-xl font-medium">ì£¼</span>
                            </div>
                            <p class="text-blue-100 text-sm mt-3 bg-blue-700/50 inline-block px-3 py-1 rounded-full italic">
                                ì›” ì•½ <span id="monthlyWon" class="font-bold">130</span>ë§Œ ì› íˆ¬ì í•„ìš”
                            </p>
                        </div>

                        <div class="grid grid-cols-2 gap-4 pt-6 border-t border-blue-400/30">
                            <div>
                                <p class="text-blue-200 text-xs mb-1">ìµœì¢… ëª©í‘œ ìì‚°</p>
                                <p id="targetAsset" class="text-xl font-bold text-white">ì•½ 8.5ì–µ ì›</p>
                            </div>
                            <div>
                                <p class="text-blue-200 text-xs mb-1">ìµœì¢… ë³´ìœ  ì£¼ì‹</p>
                                <p id="totalShares" class="text-xl font-bold text-white">48,500 ì£¼</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-8 bg-blue-700/50 p-4 rounded-xl text-xs leading-relaxed text-blue-100">
                    ğŸ’¡ <b>ì„±ê³µ í¬ì¸íŠ¸:</b> ISA ê³„ì¢Œì—ì„œ ë°œìƒí•˜ëŠ” ë°°ë‹¹ê¸ˆì„ ì¦‰ì‹œ ì¬íˆ¬ìí•˜ë©´ ëª©í‘œ ë‹¬ì„± ì‹œì ì„ í›¨ì”¬ ì•ë‹¹ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ìœ„ ìˆ˜ì¹˜ëŠ” ì¬íˆ¬ìë¥¼ ê³ ë ¤í•˜ì§€ ì•Šì€ ë³´ìˆ˜ì  ì‚°ì¶œê°’ì…ë‹ˆë‹¤.)
                </div>
            </div>
        </div>

        <div class="mt-8 text-center text-slate-400 text-sm">
            â€» ìœ„ ì‹œë®¬ë ˆì´ì…˜ì€ ì…ë ¥ëœ ì¡°ê±´ì— ë”°ë¥¸ ì¶”ì •ì¹˜ì´ë©°, ë¯¸ë˜ì˜ íˆ¬ì ìˆ˜ìµì„ ë³´ì¦í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        </div>
    </div>

    <script>
        const ageInput = document.getElementById('age');
        const periodInput = document.getElementById('period');
        const targetMonthlyInput = document.getElementById('targetMonthly');
        const currentPriceInput = document.getElementById('currentPrice');
        const annualReturnInput = document.getElementById('annualReturn');
        const divYieldInput = document.getElementById('divYield');

        function updateUI() {
            // ì…ë ¥ê°’ íŒŒì‹± (ê°’ì´ ë¹„ì–´ìˆì„ ê²½ìš° 0ìœ¼ë¡œ ì²˜ë¦¬)
            const age = parseInt(ageInput.value) || 0;
            const period = parseInt(periodInput.value) || 0;
            const targetMonthly = (parseFloat(targetMonthlyInput.value) || 0) * 10000;
            const currentPrice = parseFloat(currentPriceInput.value) || 1;
            const annualReturn = (parseFloat(annualReturnInput.value) || 0) / 100;
            const divYield = (parseFloat(divYieldInput.value) || 0) / 100;

            // ìƒë‹¨ ìš”ì•½ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            document.getElementById('targetAge').innerText = age + period;
            document.getElementById('resultDiv').innerText = (targetMonthly / 10000).toLocaleString();

            // 1. ëª©í‘œ ìì‚° ê³„ì‚° (ë°°ë‹¹ìˆ˜ìµë¥  ê¸°ì¤€)
            // ëª©í‘œ ìì‚° = (ì—°ê°„ ëª©í‘œ ë°°ë‹¹ê¸ˆ) / ì—° ë°°ë‹¹ìˆ˜ìµë¥ 
            const targetAsset = divYield > 0 ? (targetMonthly * 12) / divYield : 0;
            
            // 2. ì›” ì ë¦½ì•¡ ì‚°ì¶œ (ë¯¸ë˜ê°€ì¹˜ ê³µì‹ì˜ ì—­ì‚°)
            // PMT = FV * (r / ((1 + r)^n - 1))
            const monthlyRate = annualReturn / 12;
            const months = period * 12;
            
            let monthlyInvestment = 0;
            if (months > 0) {
                if (monthlyRate > 0) {
                    monthlyInvestment = targetAsset * (monthlyRate / (Math.pow(1 + monthlyRate, months) - 1));
                } else {
                    monthlyInvestment = targetAsset / months;
                }
            }

            const monthlyShares = Math.ceil(monthlyInvestment / currentPrice);
            const totalSharesNeeded = Math.ceil(targetAsset / currentPrice);

            // ê²°ê³¼ í™”ë©´ ì—…ë°ì´íŠ¸
            document.getElementById('monthlyShares').innerText = isFinite(monthlyShares) ? monthlyShares.toLocaleString() : '0';
            document.getElementById('monthlyWon').innerText = isFinite(monthlyShares) ? (Math.round(monthlyShares * currentPrice / 10000)).toLocaleString() : '0';
            
            const assetInEok = (targetAsset / 100000000);
            document.getElementById('targetAsset').innerText = assetInEok >= 0.1 ? `ì•½ ${assetInEok.toFixed(1)}ì–µ ì›` : `${(targetAsset/10000).toLocaleString()}ë§Œ ì›`;
            document.getElementById('totalShares').innerText = `${totalSharesNeeded.toLocaleString()} ì£¼`;
        }

        // ëª¨ë“  ì…ë ¥ì°½ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
        [ageInput, periodInput, targetMonthlyInput, currentPriceInput, annualReturnInput, divYieldInput].forEach(el => {
            el.addEventListener('input', updateUI);
            // ìˆ«ìê°€ ì•„ë‹Œ ê°’ì´ ì…ë ¥ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•œ ìµœì†Œí•œì˜ ì¥ì¹˜
            el.addEventListener('blur', () => {
                if(el.value === "") el.value = el.getAttribute('value');
                updateUI();
            });
        });

        // ì´ˆê¸° ì‹¤í–‰
        updateUI();
    </script>
</body>
</html>